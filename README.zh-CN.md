语言：
[English](README.md) |
[简体中文](README.zh-CN.md)

# Map Marks

Map Marks 是一个尚在开发中的用于高亮地图节点的Slay the Spire（杀戮尖塔）mod。它是一个精神续作，目的是为了改进前两个mod: "Highlight Paths"（作者： reina - [Steam创意工坊链接](https://steamcommunity.com/sharedfiles/filedetails/?id=1611047977)）；"Better Paths" （我自己开发，世界上名字最糟糕的mod - [Github链接](https://github.com/casey-c/sts_betterpaths)）。

![overview](.github/overview.png)

## 功能

相较于市面上已经存在的mod有一些改进：

### 高亮

开始于

    按住鼠标右键并移动鼠标

鼠标移动到地图节点上时会进入高亮显示模式。 持续按住鼠标右键时，你可以在其它节点上面移动来激活它们的高亮状态。 你也可以通过 **单机鼠标右键** 的方式仅使这一个节点高亮。

如果你在一个未高亮的地图节点上使用 **按下鼠标右键并拖动鼠标**，这将会高亮所有鼠标光标经过的节点，将节点的颜色改为当前选中的颜色。如果你拖动鼠标到一个已经高亮的节点上，会有以下两种情况出现： 
- 修改当前高亮的颜色：如果高亮的节点的颜色和选中的颜色不一致（这将只会改变节点的颜色，但它仍然是高亮状态，这个过程表现为和你经过的其它节点使它们进入高亮模式时一样）；
- 取消高亮：如果起始节点和当前选中颜色一致。

例如：如果你当前的颜色是红色并且你以一个红色的节点作为起始节点进行 **按下鼠标右键并拖动鼠标** 操作，这将清除你起始节点的高亮状态，且你之后经过的节点的高亮状态也会被清除。如果将起始节点的颜色为 *绿色*，这将会把节点的颜色改成红色，并且任何你按住右键经过的节点都会被改成红色。这比这糟糕的描述听起来更直观。

![highlights](.github/highlight.png)

### 快速清除所有标记

你可以

    鼠标右键点击

"图例"文本左边的颜色指示器来清除当前所有的高亮状态。当鼠标放在颜色指示器上并按住 `SHIFT` 可以显示一些如何使用这个mod的帮助。

### 多种颜色高亮
使用径向选择菜单来选择当前颜色，这个菜单可以通过在屏幕上的任意地图节点和图例项以外的地方执行

    按住鼠标右键并移动鼠标

来打开。在按住鼠标右键的同时将鼠标光标拉向某个颜色来激活颜色。如果你沿着某个方向移动的足够远，当其它颜色变暗且被选中的颜色被提到其它颜色之上，就说明已经可以选中这个颜色了。松开鼠标右键来选中这个颜色。

当前高亮的颜色会被展示在屏幕右边的“图例”文本的左边（用于鼠标右键点击来清除所有高亮标记的图标）。

![radial menu](.github/radial.png)

### Quick Category Toggle

通过 **鼠标右键点击** 对应的图例项来快速开/关某种类型的所有节点的高亮状态

![legend toggle](.github/legend.png)

### 描绘

你可以直接在地图上通过以下操作进行描绘：

    Alt+按下鼠标右键后拖拽

所有的 `描绘` 都可以通过 `Alt+鼠标右键点击` 图例按钮来清除。
注意：没有撤销按钮，因为没有错误，只有快乐的意外。

![drawing](.github/drawing.png)

### 附加功能

* 快速隐藏不可达节点。你可以将鼠标移动到一个节点上然后：


    Control（CTRL）+ 鼠标右键点击

这将删除所有无法到达这个目标节点的节点高亮状态。功能用法示例：鼠标右键点击 精英图例项来高亮所有的精英节点，然后 `Control（CTRL）+ 鼠标右键点击` 带火精英，这样地图上就只会显示那些处于能够到达绿钥匙路线上的精英。

* 当你选择了一条路径后会自动隐藏不可达节点的高亮状态。所以，如果你高亮了某些一旦你朝着某个方向移动之后就不可到达的节点，它不会在视觉上扰乱你的屏幕，你可以将鼠标移动到对应的图例项来临时使这些不可达的节点高亮。

### 已知问题

* 由于我加了一个补丁使地图单元格看起来更正常，导致可能无法兼容一些地图配色/暗色类mod。这些问题有望得到解决，但还需要大家反馈一下可用还是几乎不可用，因为我还没有进行任何测试！

* 对于一些不寻常的分辨率，单元格会有一点偏移（例如：正方形分辨率或很宽的分辨率）。但为了优先保证 1080p 的显示效果，我对把缩放在各种分辨率下都调到完全正确这件事基本上是有点放弃了。所以这些分辨率下的UI会有点丑。

* 羽翼之靴（还）不在 **不可达节点** 的计算内，计划会在第一个主要版本发布前修复这个问题。

* 关闭 [InfoMod2](https://github.com/casey-c/infomod2) 的事件信息界面时，会使颜色选择菜单弹出。 计划未来会把InfoMod移植到我的Easel库中以实现更加无缝的继承，但我们还没有这么做。

## 安装

这是这个mod的早期开发版本。Mod 目前不稳定，使用可能会遇到各种问题。

跳转到 [发布页](https://github.com/casey-c/mapmarks/releases) 并下载 **所有** "easel" JAR文件和 "MapMarks" JAR文件。Easel是我尚未公开发布的UI库项目（等它稳定之后会把它发布到正式的Github仓库和创意工坊）。因为 Easel 还没准备好发布 alpha 版本，所以我把它到目前为止的最新版本也一起放在本仓库的发布里。

当这个mod需要更新时，你需要重新下载 **所有** JAR文件来确保 mod 正常工作。以后这些都会发布到创意工坊来简化这些事情，但是我们还没这么做，因为还有许多事情需要我们首先去完成。

把下载的JAR文件放到 *SlayTheSpire/mods* 目录下，当你启动带有 mod 的 Slay the Spire（杀戮尖塔）时，确保你启用了它们。

**重要：** 如果你已经安装了其它高亮路径的 mod（例如：一个来自创意工坊或我的其它路径相关mod），在你试图使用这个 mod 前 **请禁用并卸载** 它们，否则可能会出现兼容性问题。